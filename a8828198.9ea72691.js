(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{172:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return o})),t.d(n,"default",(function(){return b}));var a=t(2),r=t(9),i=(t(0),t(196)),c={id:"gotchas",title:"Gotchas"},l={id:"general/gotchas",isDocsHomePage:!1,title:"Gotchas",description:"These are some things to be aware of when using this boilerplate.",source:"@site/docs/general/gotchas.md",permalink:"/docs/general/gotchas",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/general/gotchas.md",sidebar:"someSidebar",previous:{title:"Frequently Asked Questions",permalink:"/docs/general/faq"},next:{title:"Removing offline access",permalink:"/docs/general/remove"}},o=[{value:"Special images in HTML files",id:"special-images-in-html-files",children:[]},{value:"Load reducers optimistically",id:"load-reducers-optimistically",children:[]},{value:"Exclude modules from Babel processing",id:"exclude-modules-from-babel-processing",children:[]},{value:"Running tests in <code>watch</code> mode",id:"running-tests-in-watch-mode",children:[]},{value:"When in doubt, re-install!",id:"when-in-doubt-re-install",children:[]},{value:"Cleaning up Jest cache",id:"cleaning-up-jest-cache",children:[]},{value:"Using short_name in Web App manifest",id:"using-short_name-in-web-app-manifest",children:[]}],s={rightToc:o};function b(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"These are some things to be aware of when using this boilerplate."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#special-images-in-html-files"}),"Special images in HTML files")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#load-reducers-optimistically"}),"Load reducers optimistically")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#exclude-modules-from-babel-processing"}),"Exclude modules from Babel processing")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#running-tests-in-watch-mode"}),"Running tests in ",Object(i.b)("inlineCode",{parentName:"a"},"watch")," mode")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#when-in-doubt-re-install"}),"When in doubt, re-install!")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#cleaning-up-jest-cache"}),"Cleaning up Jest cache")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#using-short_name-in-web-app-manifest"}),"Using short_name in Web App manifest"))),Object(i.b)("h2",{id:"special-images-in-html-files"},"Special images in HTML files"),Object(i.b)("p",null,"If you specify your images in the ",Object(i.b)("inlineCode",{parentName:"p"},".html")," files using the ",Object(i.b)("inlineCode",{parentName:"p"},"<img>")," tag, everything\nwill work fine. The problem comes up if you try to include images using anything\nexcept that tag, like meta tags:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-HTML"}),'<meta property="og:image" content="img/yourimg.png" />\n')),Object(i.b)("p",null,"The webpack ",Object(i.b)("inlineCode",{parentName:"p"},"html-loader")," does not recognise this as an image file and will not\ntransfer the image to the build folder. To get webpack to transfer them, you\nhave to import them with the file loader in your JavaScript somewhere, e.g.:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-JavaScript"}),"import 'file?name=[name].[ext]!../img/yourimg.png';\n")),Object(i.b)("p",null,"Then webpack will correctly transfer the image to the build folder."),Object(i.b)("h2",{id:"load-reducers-optimistically"},"Load reducers optimistically"),Object(i.b)("p",null,"If you have containers that should be available throughout the app, like a ",Object(i.b)("inlineCode",{parentName:"p"},"NavigationBar")," (they aren't route specific), you need to add their respective reducers to the root reducer with the help of ",Object(i.b)("inlineCode",{parentName:"p"},"combineReducers"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// In app/reducers.js\n\n...\nimport { combineReducers } from 'redux';\n...\n\nimport navigationBarReducer from 'containers/NavigationBar/reducer';\n\nexport default function createReducer(injectedReducers = {}) {\n  const rootReducer = combineReducers({\n    global: globalReducer,\n    language: languageProviderReducer,\n    router: connectRouter(history),\n    navigationBar: navigationBarReducer,\n    ...injectedReducers,\n  });\n\n  return rootReducer;\n}\n")),Object(i.b)("h2",{id:"exclude-modules-from-babel-processing"},"Exclude modules from Babel processing"),Object(i.b)("p",null,"You need to exclude packages which are not intended to be processed by babel. For e.g. Server packages such as 'express' or a CSS file. Just add the package name to ",Object(i.b)("inlineCode",{parentName:"p"},"exclude")," array in ",Object(i.b)("inlineCode",{parentName:"p"},"internals/config.js")," and you're all set!"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// in internals/config.js\n\nexclude: [\n  'chalk',\n  'compression',\n  'cross-env',\n  'express',\n  'ip',\n  'minimist',\n  'sanitize.css',\n  'your-unwanted-package', <- add your-unwanted-package\n  ...\n]\n")),Object(i.b)("h2",{id:"running-tests-in-watch-mode"},"Running tests in ",Object(i.b)("inlineCode",{parentName:"h2"},"watch")," mode"),Object(i.b)("p",null,"If you are unable to run tests in watch mode, you may have to install ",Object(i.b)("inlineCode",{parentName:"p"},"watchman")," for this to work. If you're using a Mac, simply run ",Object(i.b)("inlineCode",{parentName:"p"},"brew install watchman")),Object(i.b)("p",null,"You can also install ",Object(i.b)("inlineCode",{parentName:"p"},"watchman")," from source. Please visit their ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://facebook.github.io/watchman/docs/install.html"}),"official guide")," for more information."),Object(i.b)("h2",{id:"when-in-doubt-re-install"},"When in doubt, re-install!"),Object(i.b)("p",null,"If you're facing any inexplicable problems while installing dependencies, building your project or running tests, try reinstalling dependencies. It works for most cases. Run the following commands in the exact order given:"),Object(i.b)("p",null,"Remove node_modules"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"rm -rf node_modules"))),Object(i.b)("p",null,"Clear cache"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"npm cache clean"))),Object(i.b)("p",null,"Re-install dependencies"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"npm install"))),Object(i.b)("p",null,"Build project"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"npm run build"))),Object(i.b)("h2",{id:"cleaning-up-jest-cache"},"Cleaning up Jest cache"),Object(i.b)("p",null,"By default, Jest caches transformed modules, which may lead to faulty coverage reports. To prevent this, you'll have to clear the cache by running ",Object(i.b)("inlineCode",{parentName:"p"},"npm run test -- --no-cache")," as pointed out in ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://facebook.github.io/jest/docs/cli.html#cache"}),"Jest docs")),Object(i.b)("h2",{id:"using-short_name-in-web-app-manifest"},"Using short_name in Web App manifest"),Object(i.b)("p",null,"When there's insufficient space to display an app's full name it is truncated.\nThis happens with app launcher and new tab in Chrome for Android.\nThe ",Object(i.b)("inlineCode",{parentName:"p"},"short_name")," field allows a ",Object(i.b)("em",{parentName:"p"},"12 character or less abbreviation"),".\nIt also addresses any problems in testing the PWA in Lighthouse."))}b.isMDXComponent=!0},196:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=r.a.createContext({}),b=function(e){var n=r.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=b(e.components);return r.a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},d=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=b(t),d=a,m=u["".concat(c,".").concat(d)]||u[d]||p[d]||i;return t?r.a.createElement(m,l(l({ref:n},s),{},{components:t})):r.a.createElement(m,l({ref:n},s))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,c=new Array(i);c[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var s=2;s<i;s++)c[s]=t[s];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);